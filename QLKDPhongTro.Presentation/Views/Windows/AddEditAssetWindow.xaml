<Window x:Class="QLKDPhongTro.Presentation.Views.Windows.AddEditAssetWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:QLKDPhongTro.Presentation.Converters"
        Title="Thêm/Sửa tài sản" 
        Height="400" 
        Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        FontFamily="Segoe UI">

    <Window.Resources>
        <SolidColorBrush x:Key="TextPrimary" Color="#111827"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#6B7280"/>
        <SolidColorBrush x:Key="BorderColor" Color="#E5E7EB"/>
        <SolidColorBrush x:Key="BackgroundCard" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="PrimaryColor" Color="#3B82F6"/>
        <SolidColorBrush x:Key="PrimaryDarkColor" Color="#2563EB"/>
        <DropShadowEffect x:Key="CardShadow" Color="#000000" Direction="270" ShadowDepth="5" Opacity="0.12" BlurRadius="18"/>

        <!-- Added Button Style for rounded corners -->
        <Style x:Key="RoundedButtonStyle" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Margin="20">
        <Border.Effect>
            <DropShadowEffect Color="Black" Direction="270" ShadowDepth="4" Opacity="0.18" BlurRadius="30"/>
        </Border.Effect>
        <Border Background="White" CornerRadius="18" ClipToBounds="True">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Background="#F9FAFB" Padding="24,20">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock x:Name="TitleTextBlock" Text="Thêm/Sửa tài sản" 
                                   FontSize="20" FontWeight="Bold" Foreground="{StaticResource TextPrimary}"/>
                        <Button Content="✕" Width="32" Height="32" Background="Transparent" 
                                BorderBrush="Transparent" FontSize="16" Cursor="Hand" 
                                Click="CloseButton_Click" Grid.Column="1"
                                Style="{StaticResource RoundedButtonStyle}"/>
                    </Grid>
                </Border>

                <!-- Content -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <!-- FIX 1: Removed Spacing="16" -->
                    <StackPanel Margin="24">

                        <!-- Loại tài sản -->
                        <!-- Added Margin Bottom -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock Text="Loại tài sản *" FontSize="14" FontWeight="SemiBold" 
                                       Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                            <ComboBox x:Name="LoaiTaiSanComboBox" 
                                      SelectedItem="{Binding LoaiTaiSan}" 
                                      FontSize="14" Height="40" 
                                      Padding="12,0" 
                                      BorderBrush="{StaticResource BorderColor}">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding}"/>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </StackPanel>

                        <!-- Mô tả -->
                        <!-- Added Margin Bottom -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock Text="Mô tả" FontSize="14" FontWeight="SemiBold" 
                                       Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                            <TextBox x:Name="MoTaTextBox" 
                                     Text="{Binding MoTa, UpdateSourceTrigger=PropertyChanged}" 
                                     FontSize="14" Height="80" 
                                     Padding="12" 
                                     TextWrapping="Wrap" 
                                     AcceptsReturn="True"
                                     VerticalScrollBarVisibility="Auto"
                                     BorderBrush="{StaticResource BorderColor}"/>
                        </StackPanel>

                        <!-- Phí phụ thu -->
                        <StackPanel>
                            <TextBlock Text="Phí phụ thu (VNĐ)" FontSize="14" FontWeight="SemiBold" 
                                       Foreground="{StaticResource TextPrimary}" Margin="0,0,0,8"/>
                            <TextBox x:Name="PhiPhuThuTextBox" 
                                     Text="{Binding PhiPhuThu, UpdateSourceTrigger=PropertyChanged}" 
                                     FontSize="14" Height="40" 
                                     Padding="12" 
                                     BorderBrush="{StaticResource BorderColor}"/>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- Footer -->
                <Border Grid.Row="2" Background="#F9FAFB" Padding="24,16">
                    <!-- FIX 2: Removed Spacing="12" -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">

                        <!-- Added Margin Right to create space -->
                        <Button Content="Hủy" Width="100" Height="40" 
                                Background="White" Foreground="{StaticResource TextPrimary}" 
                                BorderBrush="{StaticResource BorderColor}" BorderThickness="1"
                                Cursor="Hand" Click="CancelButton_Click"
                                Margin="0,0,12,0"
                                Style="{StaticResource RoundedButtonStyle}"/>

                        <Button Content="Lưu" Width="100" Height="40" 
                                Background="{StaticResource PrimaryColor}" Foreground="White"
                                Cursor="Hand" Click="SaveButton_Click"
                                BorderThickness="0"
                                Style="{StaticResource RoundedButtonStyle}"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Border>
</Window>